@layer components {
  /* Form Variables */
  :root {
    --form-padding-y: var(--spacing-2);
    --form-padding-x: var(--spacing-3);
    --form-font-size: var(--font-size-base);
    --form-line-height: var(--line-height-base);
    --form-color: var(--text-black);
    --form-background: var(--bg-white);
    --form-border-color: var(--border-black);
    --form-border-radius: var(--border-radius-base);
    --form-box-shadow: var(--shadow-sm);
    --form-transition: var(--transition-base);
  }

  /* Form Base */
  .form-control {
    display: var(--display-block);
    width: var(--position-100);
    padding: var(--form-padding-y) var(--form-padding-x);
    font-size: var(--form-font-size);
    line-height: var(--form-line-height);
    color: var(--form-color);
    background-color: var(--form-background);
    border: var(--spacing-1) solid var(--form-border-color);
    border-radius: var(--form-border-radius);
    box-shadow: var(--form-box-shadow);
    transition: var(--form-transition);
  }

  /* Form States */
  .form-control:focus {
    border-color: var(--theme-primary-500);
    box-shadow: var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-2) var(--theme-primary-100);
    outline: var(--display-none);
  }

  .form-control:disabled {
    background-color: var(--theme-gray-100);
    cursor: not-allowed;
  }

  .form-control[readonly] {
    background-color: var(--theme-gray-50);
  }

  /* Form Validation */
  .form-control.is-valid {
    border-color: var(--theme-success-500);
  }

  .form-control.is-valid:focus {
    border-color: var(--theme-success-500);
    box-shadow: var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-2) var(--theme-success-100);
  }

  .form-control.is-invalid {
    border-color: var(--theme-error-500);
  }

  .form-control.is-invalid:focus {
    border-color: var(--theme-error-500);
    box-shadow: var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-2) var(--theme-error-100);
  }

  /* Form Sizes */
  .form-control-sm {
    padding: var(--spacing-1) var(--spacing-2);
    font-size: var(--font-size-sm);
  }

  .form-control-lg {
    padding: var(--spacing-3) var(--spacing-4);
    font-size: var(--font-size-lg);
  }

  /* Form Labels */
  .form-label {
    display: var(--display-block);
    margin-bottom: var(--spacing-1);
    font-weight: var(--font-weight-medium);
    color: var(--theme-gray-700);
  }

  /* Form Help Text */
  .form-text {
    display: var(--display-block);
    margin-top: var(--spacing-1);
    font-size: var(--font-size-sm);
    color: var(--theme-gray-500);
  }

  /* Form Check */
  .form-check {
    position: relative;
    display: var(--display-block);
    padding-left: var(--spacing-4);
  }

  .form-check-input {
    position: absolute;
    margin-top: var(--spacing-1);
    margin-left: calc(-1 * var(--spacing-4));
  }

  .form-check-label {
    margin-bottom: var(--spacing-0);
  }

  /* Form Select */
  .form-select {
    display: var(--display-block);
    width: var(--position-100);
    padding: var(--form-padding-y) var(--spacing-8) var(--form-padding-y) var(--form-padding-x);
    font-size: var(--form-font-size);
    line-height: var(--form-line-height);
    color: var(--form-color);
    background-color: var(--form-background);
    border: var(--spacing-1) solid var(--form-border-color);
    border-radius: var(--form-border-radius);
    box-shadow: var(--form-box-shadow);
    transition: var(--form-transition);
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
    background-repeat: var(--bg-no-repeat);
    background-position: var(--bg-position-right) var(--spacing-2) var(--bg-position-center);
    background-size: var(--spacing-6);
  }

  .form-select:focus {
    border-color: var(--theme-primary-500);
    box-shadow: var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-2) var(--theme-primary-100);
    outline: var(--display-none);
  }

  .form-select:disabled {
    background-color: var(--theme-gray-100);
    cursor: not-allowed;
  }

  /* Form Range */
  .form-range {
    width: var(--position-100);
    height: var(--spacing-6);
    padding: var(--spacing-0);
    background-color: var(--bg-transparent);
    appearance: none;
  }

  .form-range:focus {
    outline: var(--display-none);
  }

  .form-range::-webkit-slider-thumb {
    width: var(--spacing-4);
    height: var(--spacing-4);
    margin-top: calc(-1 * var(--spacing-1));
    background-color: var(--theme-primary-500);
    border: var(--spacing-0);
    border-radius: var(--spacing-4);
    appearance: none;
  }

  .form-range::-moz-range-thumb {
    width: var(--spacing-4);
    height: var(--spacing-4);
    background-color: var(--theme-primary-500);
    border: var(--spacing-0);
    border-radius: var(--spacing-4);
  }

  .form-range::-webkit-slider-runnable-track {
    width: var(--position-100);
    height: var(--spacing-2);
    color: var(--color-transparent);
    cursor: pointer;
    background-color: var(--theme-gray-200);
    border-color: var(--color-transparent);
    border-radius: var(--spacing-4);
  }

  .form-range::-moz-range-track {
    width: var(--position-100);
    height: var(--spacing-2);
    color: var(--color-transparent);
    cursor: pointer;
    background-color: var(--theme-gray-200);
    border-color: var(--color-transparent);
    border-radius: var(--spacing-4);
  }

  /* Form File */
  .form-file {
    position: relative;
    display: var(--display-inline-block);
    width: var(--position-100);
    height: calc(1.5em + 0.75rem + 2px);
    margin-bottom: var(--spacing-0);
  }

  .form-file-input {
    position: relative;
    z-index: var(--z-index-2);
    width: var(--position-100);
    height: calc(1.5em + 0.75rem + 2px);
    margin: var(--spacing-0);
    opacity: var(--spacing-0);
  }

  .form-file-label {
    position: absolute;
    top: var(--spacing-0);
    right: var(--spacing-0);
    left: var(--spacing-0);
    z-index: var(--z-index-1);
    height: calc(1.5em + 0.75rem + 2px);
    padding: var(--form-padding-y) var(--form-padding-x);
    font-weight: var(--font-weight-normal);
    line-height: var(--line-height-normal);
    color: var(--form-color);
    background-color: var(--form-background);
    border: var(--spacing-1) solid var(--form-border-color);
    border-radius: var(--form-border-radius);
  }

  .form-file-label::after {
    position: absolute;
    top: var(--spacing-0);
    right: var(--spacing-0);
    bottom: var(--spacing-0);
    z-index: var(--z-index-3);
    display: var(--display-block);
    height: calc(1.5em + 0.75rem);
    padding: var(--form-padding-y) var(--form-padding-x);
    line-height: var(--line-height-normal);
    color: var(--form-color);
    content: "Browse";
    background-color: var(--theme-gray-200);
    border-left: inherit;
    border-radius: var(--spacing-0) var(--form-border-radius) var(--form-border-radius) var(--spacing-0);
  }

  /* Form Group */
  .form-group {
    margin-bottom: 1rem;
  }

  .form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
    color: var(--color-text);
  }

  .form-group .help-text {
    font-size: 0.875rem;
    color: var(--color-text-secondary);
    margin-top: 0.25rem;
  }

  .form-group .error-text {
    font-size: 0.875rem;
    color: var(--color-error);
    margin-top: 0.25rem;
  }

  /* Input */
  .input {
    display: block;
    width: 100%;
    padding: var(--input-padding-y) var(--input-padding-x);
    border: var(--input-border-width) solid var(--input-border-color);
    border-radius: var(--input-border-radius);
    background: var(--input-background);
    color: var(--input-color);
    transition: all var(--transition-normal);
  }

  .input::placeholder {
    color: var(--input-placeholder-color);
  }

  .input:focus {
    outline: none;
    border-color: var(--input-focus-border-color);
    box-shadow: var(--input-focus-shadow);
  }

  .input:disabled {
    background: var(--input-disabled-background);
    color: var(--input-disabled-color);
    cursor: not-allowed;
  }

  .input-error {
    border-color: var(--input-error-border-color);
  }

  .input-error:focus {
    box-shadow: var(--input-error-shadow);
  }

  .input-success {
    border-color: var(--input-success-border-color);
  }

  .input-success:focus {
    box-shadow: var(--input-success-shadow);
  }

  .input-warning {
    border-color: var(--input-warning-border-color);
  }

  .input-warning:focus {
    box-shadow: var(--input-warning-shadow);
  }

  /* Input Sizes */
  .input-sm {
    padding: 0.25rem 0.5rem;
    font-size: 0.875rem;
  }

  .input-md {
    padding: var(--input-padding-y) var(--input-padding-x);
    font-size: 1rem;
  }

  .input-lg {
    padding: 0.75rem 1rem;
    font-size: 1.125rem;
  }

  /* Input with Icon */
  .input-with-icon {
    position: relative;
  }

  .input-with-icon .input {
    padding-left: 2.5rem;
  }

  .input-with-icon .icon {
    position: absolute;
    left: 0.75rem;
    top: 50%;
    transform: translateY(-50%);
    color: var(--input-placeholder-color);
  }

  .input-with-icon .input:focus + .icon {
    color: var(--input-focus-border-color);
  }

  /* Input with Button */
  .input-with-button {
    display: flex;
  }

  .input-with-button .input {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
  }

  .input-with-button .button {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
  }

  /* Checkbox */
  .checkbox {
    display: inline-flex;
    align-items: center;
    cursor: pointer;
  }

  .checkbox input {
    position: absolute;
    opacity: 0;
    cursor: pointer;
    height: 0;
    width: 0;
  }

  .checkbox .checkmark {
    width: var(--checkbox-size);
    height: var(--checkbox-size);
    border: var(--input-border-width) solid var(--input-border-color);
    border-radius: var(--checkbox-border-radius);
    background: var(--input-background);
    transition: all var(--transition-normal);
  }

  .checkbox:hover .checkmark {
    border-color: var(--input-focus-border-color);
  }

  .checkbox input:checked ~ .checkmark {
    background: var(--color-primary);
    border-color: var(--color-primary);
  }

  .checkbox input:checked ~ .checkmark::after {
    content: '';
    position: absolute;
    left: 50%;
    top: 50%;
    width: 0.5rem;
    height: 0.5rem;
    border: solid white;
    border-width: 0 2px 2px 0;
    transform: translate(-50%, -50%) rotate(45deg);
  }

  .checkbox input:disabled ~ .checkmark {
    background: var(--input-disabled-background);
    border-color: var(--input-disabled-color);
    cursor: not-allowed;
  }

  /* Radio */
  .radio {
    display: inline-flex;
    align-items: center;
    cursor: pointer;
  }

  .radio input {
    position: absolute;
    opacity: 0;
    cursor: pointer;
    height: 0;
    width: 0;
  }

  .radio .checkmark {
    width: var(--radio-size);
    height: var(--radio-size);
    border: var(--input-border-width) solid var(--input-border-color);
    border-radius: var(--radio-border-radius);
    background: var(--input-background);
    transition: all var(--transition-normal);
  }

  .radio:hover .checkmark {
    border-color: var(--input-focus-border-color);
  }

  .radio input:checked ~ .checkmark {
    border-color: var(--color-primary);
  }

  .radio input:checked ~ .checkmark::after {
    content: '';
    position: absolute;
    left: 50%;
    top: 50%;
    width: 0.5rem;
    height: 0.5rem;
    background: var(--color-primary);
    border-radius: 50%;
    transform: translate(-50%, -50%);
  }

  .radio input:disabled ~ .checkmark {
    background: var(--input-disabled-background);
    border-color: var(--input-disabled-color);
    cursor: not-allowed;
  }

  /* Select */
  .select {
    display: block;
    width: 100%;
    padding: var(--input-padding-y) var(--input-padding-x);
    padding-right: 2rem;
    border: var(--input-border-width) solid var(--input-border-color);
    border-radius: var(--input-border-radius);
    background: var(--input-background);
    color: var(--input-color);
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'%3E%3Cpath fill='%236b7280' d='M0 2l4 4 4-4z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.75rem center;
    background-size: var(--select-arrow-size);
    transition: all var(--transition-normal);
  }

  .select:focus {
    outline: none;
    border-color: var(--input-focus-border-color);
    box-shadow: var(--input-focus-shadow);
  }

  .select:disabled {
    background: var(--input-disabled-background);
    color: var(--input-disabled-color);
    cursor: not-allowed;
  }

  /* Textarea */
  .textarea {
    display: block;
    width: 100%;
    min-height: var(--textarea-min-height);
    padding: var(--input-padding-y) var(--input-padding-x);
    border: var(--input-border-width) solid var(--input-border-color);
    border-radius: var(--input-border-radius);
    background: var(--input-background);
    color: var(--input-color);
    resize: var(--textarea-resize);
    transition: all var(--transition-normal);
  }

  .textarea:focus {
    outline: none;
    border-color: var(--input-focus-border-color);
    box-shadow: var(--input-focus-shadow);
  }

  .textarea:disabled {
    background: var(--input-disabled-background);
    color: var(--input-disabled-color);
    cursor: not-allowed;
  }

  /* Form Validation */
  .form-group.has-error .input,
  .form-group.has-error .select,
  .form-group.has-error .textarea {
    border-color: var(--input-error-border-color);
  }

  .form-group.has-error .input:focus,
  .form-group.has-error .select:focus,
  .form-group.has-error .textarea:focus {
    box-shadow: var(--input-error-shadow);
  }

  .form-group.has-success .input,
  .form-group.has-success .select,
  .form-group.has-success .textarea {
    border-color: var(--input-success-border-color);
  }

  .form-group.has-success .input:focus,
  .form-group.has-success .select:focus,
  .form-group.has-success .textarea:focus {
    box-shadow: var(--input-success-shadow);
  }

  .form-group.has-warning .input,
  .form-group.has-warning .select,
  .form-group.has-warning .textarea {
    border-color: var(--input-warning-border-color);
  }

  .form-group.has-warning .input:focus,
  .form-group.has-warning .select:focus,
  .form-group.has-warning .textarea:focus {
    box-shadow: var(--input-warning-shadow);
  }

  /* Form Elements */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="number"],
  input[type="tel"],
  input[type="url"],
  input[type="search"],
  input[type="date"],
  input[type="time"],
  input[type="datetime-local"],
  input[type="month"],
  input[type="week"],
  input[type="color"],
  select,
  textarea {
    font-weight: var(--font-weight-medium);
    padding: var(--spacing-1);
    background-repeat: var(--bg-no-repeat);
    background-position: var(--position-right);
  }
}  